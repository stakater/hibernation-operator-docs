{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"index.html","title":"Welcome to the Docs","text":""},{"location":"index.html#welcome-to-the-docs","title":"Welcome to the Docs","text":"<p>Managing Kubernetes clusters at scale often leads to underutilized resources\u2014especially in development, staging, and CI/CD environments that run 24/7 but are only actively used during business hours. This results in unnecessary cloud spend and inefficient resource utilization.</p> <p>The Hibernation Operator solves this by enabling automated, policy-driven hibernation of workloads. It safely scales down <code>Deployments</code> and <code>StatefulSets</code> to zero during off-hours and restores them to their original state when needed\u2014helping teams reduce costs without sacrificing developer experience.</p> <p>With the Hibernation Operator, you can:</p> <ul> <li>Schedule hibernation using standard cron expressions for sleep and wake times.</li> <li>Target workloads across multiple namespaces using explicit lists, dynamic label selectors, or ArgoCD AppProjects (for GitOps-aligned teams).</li> <li>Empower platform teams with cluster-wide policies via <code>ClusterResourceSupervisor</code>.</li> <li>Enable self-service for application teams using namespace-scoped <code>ResourceSupervisor</code>.</li> <li>Preserve state reliably: Original replica counts are stored in the CR\u2019s status for accurate restoration\u2014even after operator restarts.</li> <li>Integrate seamlessly with existing Kubernetes and ArgoCD workflows\u2014no external dependencies required.</li> </ul> <p>The Hibernation Operator is lightweight, secure, and built for real-world Kubernetes environments\u2014whether you're running on OpenShift, EKS, AKS, GKE, or vanilla Kubernetes.</p>"},{"location":"index.html#installation","title":"Installation","text":"<p>Refer to the installation guide to deploy the Hibernation Operator in your cluster via Helm or Operator Lifecycle Manager (OLM).</p>"},{"location":"changelog.html","title":"Changelog","text":""},{"location":"changelog.html#changelog","title":"Changelog","text":""},{"location":"changelog.html#v01102","title":"v0.1.102","text":"<ul> <li>Initial release</li> </ul>"},{"location":"eula.html","title":"EULA","text":""},{"location":"eula.html#eula","title":"EULA","text":"<p>Last revision date: 12 December 2022</p> <p>IMPORTANT: THIS SOFTWARE END-USER LICENSE AGREEMENT (\"EULA\") IS A LEGAL AGREEMENT (\"Agreement\") BETWEEN YOU (THE CUSTOMER, EITHER AS AN INDIVIDUAL OR, IF PURCHASED OR OTHERWISE ACQUIRED BY OR FOR AN ENTITY, AS AN ENTITY) AND Stakater AB OR ITS SUBSIDUARY (\"COMPANY\"). READ IT CAREFULLY BEFORE COMPLETING THE INSTALLATION PROCESS AND USING HIBERNATION OPERATOR (\"SOFTWARE\"). IT PROVIDES A LICENSE TO USE THE SOFTWARE AND CONTAINS WARRANTY INFORMATION AND LIABILITY DISCLAIMERS. BY INSTALLING AND USING THE SOFTWARE, YOU ARE CONFIRMING YOUR ACCEPTANCE OF THE SOFTWARE AND AGREEING TO BECOME BOUND BY THE TERMS OF THIS AGREEMENT.</p> <p>In order to use the Software under this Agreement, you must receive a license key at the time of purchase, in accordance with the scope of use and other terms specified and as set forth in Section 1 of this Agreement.</p>"},{"location":"eula.html#1-license-grant","title":"1. License Grant","text":"<ul> <li> <p>1.1 General Use. This Agreement grants you a non-exclusive, non-transferable, limited license to the use rights for the Software, subject to the terms and conditions in this Agreement. The Software is licensed, not sold.</p> </li> <li> <p>1.2 Electronic Delivery. All Software and license documentation shall be delivered by electronic means unless otherwise specified on the applicable invoice or at the time of purchase. Software shall be deemed delivered when it is made available for download for you by the Company (\"Delivery\").</p> </li> </ul>"},{"location":"eula.html#2-modifications","title":"2. Modifications","text":"<ul> <li> <p>2.1 No Modifications may be created of the original Software. \"Modification\" means:</p> <ul> <li> <p>(a) Any addition to or deletion from the contents of a file included in the original Software</p> </li> <li> <p>(b) Any new file that contains any part of the original Software</p> </li> </ul> </li> </ul>"},{"location":"eula.html#3-restricted-uses","title":"3. Restricted Uses","text":"<ul> <li> <p>3.1 You shall not (and shall not allow any third party to):</p> <ul> <li> <p>(a) reverse engineer the Software or attempt to reconstruct or discover any source code, underlying ideas, algorithms, file formats or programming interfaces of the Software by any means whatsoever (except and only to the extent that applicable law prohibits or restricts reverse engineering restrictions);</p> </li> <li> <p>(b) distribute, sell, sub-license, rent, lease or use the Software for time sharing, hosting, service provider or like purposes, except as expressly permitted under this Agreement;</p> </li> <li> <p>(c) redistribute the Software;</p> </li> <li> <p>(d) remove any product identification, proprietary, copyright or other notices contained in the Software;</p> </li> <li> <p>(e) modify any part of the Software, create a derivative work of any part of the Software (except as permitted in Section 4), or incorporate the Software, except to the extent expressly authorized in writing by the Company;</p> </li> <li> <p>(f) publicly disseminate performance information or analysis (including, without limitation, benchmarks) from any source relating to the Software;</p> </li> <li> <p>(g) utilize any equipment, device, software, or other means designed to circumvent or remove any form of Source URL or copy protection used by the Company in connection with the Software, or use the Software together with any authorization code, Source URL, serial number, or other copy protection device not supplied by the Company;</p> </li> <li> <p>(h) use the Software to develop a product which is competitive with any of the Company's product offerings;</p> </li> <li> <p>(i) use unauthorized Source URLs or license key(s) or distribute or publish Source URLs or license key(s), except as may be expressly permitted by the Company in writing. If your unique license is ever published, the Company reserves the right to terminate your access without notice.</p> </li> </ul> </li> <li> <p>3.2 Under no circumstances may you use the Software as part of a product or service that provides similar functionality to the Software itself.</p> </li> </ul>"},{"location":"eula.html#4-ownership","title":"4. Ownership","text":"<ul> <li>4.1 Notwithstanding anything to the contrary contained herein, except for the limited license rights expressly provided herein, the Company and its suppliers have and will retain all rights, title and interest (including, without limitation, all patent, copyright, trademark, trade secret and other intellectual property rights) in and to the Software and all copies, modifications and derivative works thereof (including any changes which incorporate any of your ideas, feedback or suggestions). You acknowledge that you are obtaining only a limited license right to the Software, and that irrespective of any use of the words \"purchase\", \"sale\" or like terms hereunder no ownership rights are being conveyed to you under this Agreement or otherwise.</li> </ul>"},{"location":"eula.html#5-fees-and-payment","title":"5. Fees and Payment","text":"<ul> <li>5.1 The Software license fees will be due and payable in full as set forth in the applicable invoice or at the time of purchase. You shall be responsible for all taxes, with-holdings, duties and levies arising from the order (excluding taxes based on the net income of the Company).</li> </ul>"},{"location":"eula.html#6-support-maintenance-and-services","title":"6. Support, Maintenance and Services","text":"<ul> <li>6.1 Subject to the terms and conditions of this Agreement, as set forth in your invoice, and as set forth on the Stakater support page, support and maintenance services may be included with the purchase of your license subscription.</li> </ul>"},{"location":"eula.html#7-disclaimer-of-warranties","title":"7. Disclaimer of Warranties","text":"<ul> <li> <p>7.1 The Software is provided \"as is\", with all faults, defects and errors, and without warranty of any kind. The Company does not warrant that the Software will be free of bugs, errors, or other defects, and the Company shall have no liability of any kind for the use of or inability to use the Software, the Software content or any associated service, and you acknowledge that it is not technically practicable for the Company to do so.</p> </li> <li> <p>7.2 To the maximum extent permitted by applicable law, the Company disclaims all warranties, express, implied, arising by law or otherwise, regarding the Software, the Software content and their respective performance or suitability for your intended use, including without limitation any implied warranty of merchantability, fitness for a particular purpose.</p> </li> </ul>"},{"location":"eula.html#8-limitation-of-liability","title":"8. Limitation of Liability","text":"<ul> <li> <p>8.1 In no event will the Company be liable for any direct, indirect, consequential, incidental, special, exemplary, or punitive damages or liabilities whatsoever arising from or relating to the Software, the Software content or this Agreement, whether based on contract, tort (including negligence), strict liability or other theory, even if the Company has been advised of the possibility of such damages.</p> </li> <li> <p>8.2 In no event will the Company's liability exceed the Software license price as indicated in the invoice. The existence of more than one claim will not enlarge or extend this limit.</p> </li> </ul>"},{"location":"eula.html#9-remedies","title":"9. Remedies","text":"<ul> <li> <p>9.1 Your exclusive remedy and the Company's entire liability for breach of this Agreement shall be limited, at the Company's sole and exclusive discretion, to:</p> <ul> <li> <p>(a) replacement of any defective software or documentation; or</p> </li> <li> <p>(b) refund of the license fee paid to the Company</p> </li> </ul> </li> </ul>"},{"location":"eula.html#10-acknowledgements","title":"10. Acknowledgements","text":"<ul> <li> <p>10.1 Consent to the Use of Data. You agree that the Company and its affiliates may collect and use technical information gathered as part of the product support services. The Company may use this information solely to improve products and services and will not disclose this information in a form that personally identifies individuals or organizations.</p> </li> <li> <p>10.2 Government End Users. If the Software and related documentation are supplied to or purchased by or on behalf of a Government, then the Software is deemed to be \"commercial software\" as that term is used in the acquisition regulation system.</p> </li> </ul>"},{"location":"eula.html#11-third-party-software","title":"11. Third Party Software","text":"<ul> <li> <p>11.1 Examples included in Software may provide links to third party libraries or code (collectively \"Third Party Software\") to implement various functions. Third Party Software does not comprise part of the Software. In some cases, access to Third Party Software may be included along with the Software delivery as a convenience for demonstration purposes. Licensee acknowledges:</p> <ul> <li> <p>(1) That some part of Third Party Software may require additional licensing of copyright and patents from the owners of such, and</p> </li> <li> <p>(2) That distribution of any of the Software referencing or including any portion of a Third Party Software may require appropriate licensing from such third parties</p> </li> </ul> </li> </ul>"},{"location":"eula.html#12-miscellaneous","title":"12. Miscellaneous","text":"<ul> <li> <p>12.1 Entire Agreement. This Agreement sets forth our entire agreement with respect to the Software and the subject matter hereof and supersedes all prior and contemporaneous understandings and agreements whether written or oral.</p> </li> <li> <p>12.2 Amendment. The Company reserves the right, in its sole discretion, to amend this Agreement from time. Amendments are managed as described in General Provisions.</p> </li> <li> <p>12.3 Assignment. You may not assign this Agreement or any of its rights under this Agreement without the prior written consent of The Company and any attempted assignment without such consent shall be void.</p> </li> <li> <p>12.4 Export Compliance. You agree to comply with all applicable laws and regulations, including laws, regulations, orders or other restrictions on export, re-export or redistribution of software.</p> </li> <li> <p>12.5 Indemnification. You agree to defend, indemnify, and hold harmless the Company from and against any lawsuits, claims, losses, damages, fines and expenses (including attorneys' fees and costs) arising out of your use of the Software or breach of this Agreement.</p> </li> <li> <p>12.6 Attorneys' Fees and Costs. The prevailing party in any action to enforce this Agreement will be entitled to recover its attorneys' fees and costs in connection with such action.</p> </li> <li> <p>12.7 Severability. If any provision of this Agreement is held by a court of competent jurisdiction to be invalid, illegal, or unenforceable, the remainder of this Agreement will remain in full force and effect.</p> </li> <li> <p>12.8 Waiver. Failure or neglect by either party to enforce at any time any of the provisions of this license Agreement shall not be construed or deemed to be a waiver of that party's rights under this Agreement.</p> </li> <li> <p>12.9 Audit. The Company may, at its expense, appoint its own personnel or an independent third party to audit the numbers of installations of the Software in use by you. Any such audit shall be conducted upon thirty (30) days prior notice, during regular business hours and shall not unreasonably interfere with your business activities.</p> </li> <li> <p>12.10 Headings. The headings of sections and paragraphs of this Agreement are for convenience of reference only and are not intended to restrict, affect or be of any weight in the interpretation or construction of the provisions of such sections or paragraphs.</p> </li> </ul>"},{"location":"eula.html#13-contact-information","title":"13. Contact Information","text":"<ul> <li>13.1 If you have any questions about this EULA, or if you want to contact the Company for any reason, please direct correspondence to <code>sales@stakater.com</code>.</li> </ul>"},{"location":"troubleshooting.html","title":"Troubleshooting Guide","text":""},{"location":"troubleshooting.html#troubleshooting-guide","title":"Troubleshooting Guide","text":""},{"location":"about/benefits.html","title":"Benefits","text":""},{"location":"about/benefits.html#benefits","title":"Benefits","text":""},{"location":"about/benefits.html#benefits-of-clusterresourcesupervisor-cluster-scoped","title":"\u2705 Benefits of <code>ClusterResourceSupervisor</code> (Cluster-Scoped)","text":"<ol> <li>Centralized Control </li> <li>Enables cluster administrators to define global hibernation policies that apply across many namespaces or ArgoCD AppProjects.</li> <li> <p>Ideal for cost optimization in large environments (e.g., dev/test clusters that sleep nights and weekends).</p> </li> <li> <p>Flexible Namespace Targeting </p> </li> <li>Supports explicit namespace lists (<code>names</code>) and dynamic selection via label selectors (<code>matchLabels</code>, <code>matchExpressions</code>).</li> <li> <p>Allows automatic inclusion of new namespaces that match certain labels (e.g., <code>env: dev</code>).</p> </li> <li> <p>ArgoCD Integration </p> </li> <li>Can target ArgoCD AppProjects, enabling hibernation based on GitOps application boundaries.</li> <li> <p>Useful in GitOps workflows where applications are grouped into projects\u2014no need to track individual namespaces.</p> </li> <li> <p>Rich Observability &amp; auditability </p> </li> <li>Detailed <code>status</code> includes:<ul> <li><code>watchedNamespaces</code> / <code>ignoreNamespaces</code></li> <li><code>sleepingNamespaces</code> with per-application replica counts and kinds (<code>Deployment</code>/<code>StatefulSet</code>)</li> </ul> </li> <li> <p>Helps operators debug, verify, and report on hibernation impact.</p> </li> <li> <p>Cluster-Wide Efficiency </p> </li> <li>One CR can manage dozens or hundreds of namespaces\u2014reducing configuration sprawl.</li> </ol>"},{"location":"about/benefits.html#benefits-of-resourcesupervisor-namespace-scoped","title":"\u2705 Benefits of <code>ResourceSupervisor</code> (Namespace-Scoped)","text":"<ol> <li>Self-Service for Teams </li> <li>Application owners or namespace tenants can define their own hibernation schedule without cluster-level permissions.</li> <li> <p>Empowers autonomy while still enabling cost savings.</p> </li> <li> <p>Simplicity &amp; Low Overhead </p> </li> <li>Minimal spec: only requires a <code>schedule</code> (sleep/wake cron expressions).</li> <li> <p>No need to understand label selectors, ArgoCD, or cross-namespace concerns.</p> </li> <li> <p>Namespace Isolation </p> </li> <li>Each namespace can have independent schedules\u2014e.g., staging sleeps weekends, QA sleeps every night.</li> <li> <p>Avoids \"one-size-fits-all\" policies that may not suit all workloads.</p> </li> <li> <p>Lightweight Status </p> </li> <li>Status tracks only <code>currentStatus</code> and <code>nextReconcileTime</code>\u2014sufficient for local use cases.</li> <li> <p>Reduces cognitive load and storage overhead.</p> </li> <li> <p>RBAC-Friendly </p> </li> <li>Can be managed by users with only namespace-level roles (e.g., <code>edit</code> or custom roles), improving security posture.</li> </ol>"},{"location":"about/benefits.html#when-to-use-which","title":"\ud83c\udfaf When to Use Which?","text":"Need Solved By Platform team managing 100 dev namespaces <code>ClusterResourceSupervisor</code> Developer team wanting to hibernate their own namespace <code>ResourceSupervisor</code> GitOps-driven environment using ArgoCD AppProjects <code>ClusterResourceSupervisor</code> Avoiding privilege escalation for namespace owners <code>ResourceSupervisor</code>"},{"location":"about/key-features.html","title":"\ud83c\udf10 Key Features","text":""},{"location":"about/key-features.html#key-features","title":"\ud83c\udf10 Key Features","text":""},{"location":"about/key-features.html#1-clusterresourcesupervisor-cluster-scoped","title":"1. <code>ClusterResourceSupervisor</code> (Cluster-Scoped)","text":"<p>The <code>ClusterResourceSupervisor</code> enables platform-level hibernation management across multiple namespaces or ArgoCD AppProjects. Ideal for cluster administrators and GitOps-driven environments.</p>"},{"location":"about/key-features.html#key-features_1","title":"\u2705 Key Features","text":"<ul> <li>Cluster-wide scope: Applies hibernation policies across the entire cluster.</li> <li>Flexible namespace targeting:<ul> <li>Explicit list of namespace names (<code>names</code>)</li> <li>Dynamic selection via Kubernetes-standard label selectors (<code>matchLabels</code> and <code>matchExpressions</code>)</li> </ul> </li> <li>ArgoCD integration:<ul> <li>Target hibernation by ArgoCD AppProject names</li> <li>Specify the ArgoCD namespace where AppProjects reside</li> </ul> </li> <li>Cron-based scheduling:<ul> <li><code>sleepSchedule</code>: Cron expression to scale down workloads</li> <li><code>wakeSchedule</code> (optional): Cron expression to restore workloads; if omitted, resources remain asleep</li> </ul> </li> <li>Comprehensive status tracking:<ul> <li><code>currentStatus</code>: Overall state (<code>sleeping</code>, <code>running</code>, <code>error</code>)</li> <li><code>watchedNamespaces</code> / <code>ignoreNamespaces</code>: Lists of affected and excluded namespaces</li> <li><code>sleepingNamespaces</code>: Detailed records of scaled-down applications, including:<ul> <li>Namespace name</li> <li>Application kind (<code>Deployment</code> or <code>StatefulSet</code>)</li> <li>Original replica count (for accurate restoration)</li> <li>Per-namespace and per-application status</li> </ul> </li> <li><code>nextReconcileTime</code>: Predictable next action time (<code>ISO 8601 datetime</code>)</li> </ul> </li> </ul> <p>\ud83d\udca1 Use Case: Enforce cost-saving hibernation for all <code>env=dev</code> namespaces or all applications in the <code>platform-team</code> ArgoCD AppProject.</p>"},{"location":"about/key-features.html#2-resourcesupervisor-namespace-scoped","title":"2. <code>ResourceSupervisor</code> (Namespace-Scoped)","text":"<p>The <code>ResourceSupervisor</code> provides self-service hibernation within a single namespace. Designed for application teams who want autonomy without cluster-wide permissions.</p>"},{"location":"about/key-features.html#key-features_2","title":"\u2705 Key Features","text":"<ul> <li>Namespace-scoped: Only affects resources in the same namespace where the CR is created.</li> <li>Simple configuration:<ul> <li>Minimal spec with just a <code>schedule</code> block</li> <li>No need to manage namespace lists or label selectors</li> </ul> </li> <li>Cron-based scheduling:<ul> <li><code>sleepSchedule</code>: Required cron expression to hibernate workloads</li> <li><code>wakeSchedule</code> (optional): Cron expression to wake workloads; if not set, workloads stay asleep indefinitely</li> </ul> </li> <li>Lightweight status:<ul> <li><code>currentStatus</code>: Current hibernation state (<code>sleeping</code>, <code>running</code>, <code>error</code>)</li> <li><code>nextReconcileTime</code>: Next scheduled action (<code>ISO 8601 datetime</code>)</li> </ul> </li> </ul> <p>\ud83d\udca1 Use Case: A development team creates a <code>ResourceSupervisor</code> in their <code>myapp-staging</code> namespace to sleep workloads every night and wake them each morning.</p>"},{"location":"about/key-features.html#when-to-use-which","title":"\ud83c\udfaf When to Use Which?","text":"Scenario Recommended CRD Cluster admin managing hibernation for many teams <code>ClusterResourceSupervisor</code> GitOps with ArgoCD AppProjects <code>ClusterResourceSupervisor</code> Team wants full control over their namespace <code>ResourceSupervisor</code>"},{"location":"about/use-cases.html","title":"\ud83e\udde9 Use Cases","text":""},{"location":"about/use-cases.html#use-cases","title":"\ud83e\udde9 Use Cases","text":""},{"location":"about/use-cases.html#clusterresourcesupervisor-cluster-scoped-hibernation","title":"\u2705 <code>ClusterResourceSupervisor</code> \u2013 Cluster-Scoped Hibernation","text":""},{"location":"about/use-cases.html#1-platform-team-managing-devtest-environments","title":"1. Platform Team Managing Dev/Test Environments","text":"<p>Scenario: A central platform team operates a shared Kubernetes cluster for 50+ development teams. To reduce cloud costs, they want all non-production namespaces to sleep during nights and weekends. Solution: Create a single <code>ClusterResourceSupervisor</code> with a label selector like <code>env in (dev, test, staging)</code> and a sleep schedule of <code>0 18 * * 1-5</code> (sleep at 6 PM on weekdays) and wake at <code>0 8 * * 1-5</code>.</p>"},{"location":"about/use-cases.html#2-gitops-driven-hibernation-via-argocd-appprojects","title":"2. GitOps-Driven Hibernation via ArgoCD AppProjects","text":"<p>Scenario: Your organization uses ArgoCD with AppProjects to group applications (e.g., <code>frontend-team</code>, <code>data-platform</code>). You want to hibernate entire AppProjects during off-hours. Solution: Define a <code>ClusterResourceSupervisor</code> targeting <code>appProjects: [\"frontend-team\", \"data-platform\"]</code> in the <code>argocd</code> namespace. The operator automatically discovers all namespaces managed by those AppProjects and applies hibernation.</p>"},{"location":"about/use-cases.html#3-temporary-cluster-wide-freeze-for-maintenance","title":"3. Temporary Cluster-Wide Freeze for Maintenance","text":"<p>Scenario: During a company-wide holiday break, you want to pause all non-critical workloads across the cluster. Solution: Deploy a <code>ClusterResourceSupervisor</code> with an empty <code>labelSelector</code> (which matches all namespaces) and no <code>wakeSchedule</code>. Workloads stay asleep until manually removed or overridden.</p>"},{"location":"about/use-cases.html#4-cost-optimization-in-multi-tenant-clusters","title":"4. Cost Optimization in Multi-Tenant Clusters","text":"<p>Scenario: You run a multi-tenant cluster where each tenant has a namespace labeled with <code>tenant-id</code>. Finance requires cost reports per tenant, and hibernation is part of the SLA. Solution: Use label selectors (<code>matchLabels: { tenant-tier: basic }</code>) to hibernate only lower-tier tenants, while premium tenants remain running.</p>"},{"location":"about/use-cases.html#resourcesupervisor-namespace-scoped-hibernation","title":"\u2705 <code>ResourceSupervisor</code> \u2013 Namespace-Scoped Hibernation","text":""},{"location":"about/use-cases.html#1-application-team-self-service-hibernation","title":"1. Application Team Self-Service Hibernation","text":"<p>Scenario: A product team owns the <code>payment-service-staging</code> namespace and wants it to sleep every night to save costs, but wake up by 9 AM for QA. Solution: The team creates a <code>ResourceSupervisor</code> in their namespace with <code>sleepSchedule: \"0 20 * * *\"</code> and <code>wakeSchedule: \"0 9 * * *\"</code>. No cluster admin involvement needed.</p>"},{"location":"about/use-cases.html#2-cicd-dynamic-environments","title":"2. CI/CD Dynamic Environments","text":"<p>Scenario: Your CI pipeline spins up ephemeral namespaces for PR previews (e.g., <code>pr-1234</code>). You want them to auto-sleep after 2 hours and never wake up. Solution: The CI job creates a <code>ResourceSupervisor</code> with a one-time-like cron (e.g., using a tool that schedules a future sleep) or a short recurring sleep with no wake. Alternatively, pair with a TTL controller\u2014but <code>ResourceSupervisor</code> gives fine-grained control over what sleeps (Deployments/StatefulSets).</p>"},{"location":"about/use-cases.html#3-training-or-demo-environments","title":"3. Training or Demo Environments","text":"<p>Scenario: You provide demo environments for sales or training that should only run during business hours. Solution: In each demo namespace (<code>demo-customer-x</code>), deploy a <code>ResourceSupervisor</code> with weekday business-hour schedules. Easy to template and replicate.</p>"},{"location":"about/use-cases.html#4-compliance-driven-restrictions","title":"4. Compliance-Driven Restrictions","text":"<p>Scenario: A regulated workload must only run during approved maintenance windows (e.g., weekends). Solution: Namespace owners define a <code>ResourceSupervisor</code> that enforces strict <code>sleepSchedule</code>/<code>wakeSchedule</code> aligned with compliance policies.</p>"},{"location":"about/use-cases.html#complementary-use-case-hybrid-governance","title":"\ud83d\udd04 Complementary Use Case: Hybrid Governance","text":"<p>Scenario: Your platform provides a default hibernation policy for all <code>env=dev</code> namespaces via <code>ClusterResourceSupervisor</code>, but allows teams to override it with a local <code>ResourceSupervisor</code> if they need custom behavior. Implementation: Your operator is designed to skip namespaces that contain a <code>ResourceSupervisor</code>, giving precedence to namespace-scoped control. This enables both standardization and flexibility.</p>"},{"location":"architecture/architecture.html","title":"Architecture","text":""},{"location":"architecture/architecture.html#architecture","title":"Architecture","text":"<p>The Hibernation Operator is a lightweight yet powerful system designed to automate cost-saving hibernation of workloads in Kubernetes environments. It enables both platform teams and application owners to define schedules for scaling down and restoring applications during off-hours.</p>"},{"location":"architecture/architecture.html#component-overview","title":"Component Overview","text":"<p>The operator consists of a single intelligent controller that reconciles two custom resources, along with optional supporting components for validation and observability.</p> Name Type Description Hibernation Controller Deployment Reconciles both <code>ClusterResourceSupervisor</code> (cluster-scoped) and <code>ResourceSupervisor</code> (namespace-scoped) CRDs. Scales <code>Deployments</code> and <code>StatefulSets</code> to zero during sleep windows and restores original replica counts during wake windows. Webhook Deployment Validates cron expressions and enforces required fields during CR creation/update via admission control. Metrics Endpoint Pod (sidecar or built-in) Exposes Prometheus metrics (e.g., <code>hibernation_operator_sleeping_namespaces</code>, <code>hibernation_operator_reconcile_errors</code>). RBAC Resources ClusterRole, Role, Bindings Grants minimal required permissions to list/watch namespaces, read ArgoCD <code>AppProject</code>s, and scale workloads."},{"location":"architecture/architecture.html#integration-capabilities","title":"Integration Capabilities","text":"<ul> <li>ArgoCD: Resolves namespaces from specified <code>AppProject</code>s.</li> <li>Kubernetes Native: Works with standard <code>Deployment</code> and <code>StatefulSet</code> resources.</li> <li>Prometheus: Optional metrics for monitoring hibernation state.</li> </ul>"},{"location":"architecture/architecture.html#architecture-diagram","title":"Architecture Diagram","text":"<p>The following diagram illustrates how the Hibernation Operator interacts with Kubernetes resources and external systems:</p> <pre><code>graph TD\n    subgraph \"Kubernetes Cluster\"\n        A[Hibernation Controller] --&gt;|Watches| B[ClusterResourceSupervisor CR]\n        A --&gt;|Watches| C[ResourceSupervisor CR]\n        A --&gt;|Reads| D[ArgoCD AppProject]\n        A --&gt;|Lists| E[(Namespaces)]\n        A --&gt;|Scales| F[Deployment / StatefulSet]\n        A --&gt;|Updates| G[CR Status]\n\n        B --&gt;|Specifies| H[ArgoCD.appProjects + Namespace]\n        B --&gt;|Specifies| I[Namespace.names / labelSelector]\n        B --&gt;|Defines| J[sleepSchedule / wakeSchedule]\n\n        C --&gt;|Defines| J\n\n        D --&gt;|Owns| E\n        E --&gt;|Contains| F\n    end\n\n    subgraph \"Observability\"\n        K[Prometheus] --&gt;|Scrapes| A\n    end\n\n    subgraph \"Validation\"\n        L[Webhook] --&gt;|Validates| B\n        L --&gt;|Validates| C\n    end</code></pre> <p>\ud83d\udca1 Diagram Legend</p> <ul> <li>Solid arrows: Active interactions (watch, read, scale, etc.)</li> <li>Dashed logic: Configuration relationships (e.g., CR fields define behavior)</li> <li>CRs are custom resources created by users</li> <li>The controller never modifies namespaces or workloads unless explicitly targeted by a CR</li> </ul>"},{"location":"architecture/architecture.html#how-it-works","title":"How It Works","text":"<ol> <li>User creates a CR:</li> <li>Platform admin creates a <code>ClusterResourceSupervisor</code> to hibernate all <code>env=dev</code> namespaces.</li> <li> <p>Developer creates a <code>ResourceSupervisor</code> in their namespace for self-service hibernation.</p> </li> <li> <p>Controller reconciles:</p> </li> <li>Discovers target namespaces (via names, labels, or ArgoCD AppProjects).</li> <li>Records current replica counts of <code>Deployment</code>/<code>StatefulSet</code> in CR <code>status</code>.</li> <li>Scales workloads to 0 at <code>sleepSchedule</code>.</li> <li> <p>Restores replicas at <code>wakeSchedule</code>.</p> </li> <li> <p>State is preserved:</p> </li> <li> <p>Even if the operator restarts, it uses the stored replica count in <code>status.sleepingNamespaces</code> to restore accurately.</p> </li> <li> <p>Observability:</p> </li> <li><code>currentStatus</code>, <code>nextReconcileTime</code>, and namespace lists are updated in real time.</li> <li>Prometheus metrics enable alerting and dashboards.</li> </ol>"},{"location":"architecture/concepts.html","title":"Concepts","text":""},{"location":"architecture/concepts.html#concepts","title":"Concepts","text":""},{"location":"architecture/concepts.html#core-resources","title":"Core Resources","text":""},{"location":"architecture/concepts.html#clusterresourcesupervisor","title":"ClusterResourceSupervisor","text":"<p>A ClusterResourceSupervisor is a cluster-scoped custom resource that defines hibernation schedules for multiple namespaces across the cluster. It enables platform administrators to centrally manage cost-saving policies by targeting namespaces either explicitly by name, dynamically via Kubernetes label selectors, or through ArgoCD AppProjects. The operator scales down <code>Deployments</code> and <code>StatefulSets</code> to zero during sleep windows and restores them to their original replica counts during wake windows. Its rich status field tracks watched, ignored, and sleeping namespaces along with preserved replica states for reliable recovery.</p>"},{"location":"architecture/concepts.html#resourcesupervisor","title":"ResourceSupervisor","text":"<p>A ResourceSupervisor is a namespace-scoped custom resource that allows application teams or namespace owners to define hibernation schedules within their own namespace. It provides a lightweight, self-service mechanism to scale workloads down and up based on cron expressions\u2014without requiring cluster-level permissions. This resource is ideal for teams managing staging, CI/CD preview, or demo environments that should run only during specific hours.</p>"},{"location":"architecture/concepts.html#hibernation-schedule","title":"Hibernation Schedule","text":"<p>The Hibernation Schedule is defined via two optional cron expressions:</p> <ul> <li><code>sleepSchedule</code> (required): Specifies when workloads should be scaled to zero.</li> <li><code>wakeSchedule</code> (optional): Specifies when workloads should be restored.  </li> </ul> <p>If <code>wakeSchedule</code> is omitted, resources remain asleep indefinitely until manually woken or the CR is updated. Both schedules use standard Unix cron format (e.g., <code>\"0 18 * * 1-5\"</code>).</p>"},{"location":"architecture/concepts.html#sleeping-state","title":"Sleeping State","text":"<p>The Sleeping State refers to the condition where a <code>Deployment</code> or <code>StatefulSet</code> has been scaled to 0 replicas by the Hibernation Operator. The original replica count is preserved in the CR\u2019s <code>status.sleepingNamespaces</code> field to ensure accurate restoration. Only workloads explicitly targeted by a supervisor are affected\u2014everything else remains untouched.</p>"},{"location":"architecture/concepts.html#integration-concepts","title":"Integration Concepts","text":""},{"location":"architecture/concepts.html#argocd-appproject-integration","title":"ArgoCD AppProject Integration","text":"<p>When a <code>ClusterResourceSupervisor</code> specifies <code>argocd.appProjects</code>, the operator automatically discovers all namespaces managed by those ArgoCD AppProjects and applies hibernation to them. This enables GitOps-native hibernation policies aligned with application boundaries rather than infrastructure boundaries.</p>"},{"location":"architecture/concepts.html#label-based-namespace-selection","title":"Label-Based Namespace Selection","text":"<p>Instead of listing namespaces individually, platform teams can use Kubernetes-standard label selectors (<code>matchLabels</code> and <code>matchExpressions</code>) to dynamically include namespaces that match certain criteria (e.g., <code>env: dev</code>, <code>team: frontend</code>). This supports scalable, policy-driven hibernation in large clusters.</p>"},{"location":"how-to-guides/create-cluster-resource-supervisor.html","title":"Setup ClusterResourceSupervisor","text":""},{"location":"how-to-guides/create-cluster-resource-supervisor.html#setup-clusterresourcesupervisor","title":"Setup ClusterResourceSupervisor","text":""},{"location":"how-to-guides/create-cluster-resource-supervisor.html#creating-a-clusterresourcesupervisor","title":"Creating a <code>ClusterResourceSupervisor</code>","text":"<p>This guide explains how to create a cluster-scoped <code>ClusterResourceSupervisor</code> to manage hibernation across multiple namespaces or ArgoCD AppProjects.</p>"},{"location":"how-to-guides/create-cluster-resource-supervisor.html#prerequisites","title":"Prerequisites","text":"<ul> <li>The Hibernation Operator must be installed.</li> <li>You have cluster-admin permissions.</li> </ul>"},{"location":"how-to-guides/create-cluster-resource-supervisor.html#step-1-choose-a-targeting-strategy","title":"Step 1: Choose a Targeting Strategy","text":"<p>You can target namespaces in three ways (use one or combine <code>names</code> + <code>labelSelector</code>):</p> Method Use Case Explicit namespace list Known, static namespaces Label selector Dynamic selection (e.g., all <code>env=dev</code>) ArgoCD AppProjects GitOps-aligned hibernation"},{"location":"how-to-guides/create-cluster-resource-supervisor.html#step-2-create-a-clusterresourcesupervisor-yaml","title":"Step 2: Create a <code>ClusterResourceSupervisor</code> YAML","text":""},{"location":"how-to-guides/create-cluster-resource-supervisor.html#example-a-label-based-targeting","title":"Example A: Label-Based Targeting","text":"<pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: dev-environments-hibernation\nspec:\n  namespaces:\n    labelSelector:\n      matchLabels:\n        env: dev\n  schedule:\n    sleepSchedule: \"0 18 * * 1-5\"   # Weekdays at 6 PM UTC\n    wakeSchedule: \"0 8 * * 1-5\"     # Weekdays at 8 AM UTC\n</code></pre>"},{"location":"how-to-guides/create-cluster-resource-supervisor.html#example-b-argocd-appproject-integration","title":"Example B: ArgoCD AppProject Integration","text":"<p>\u2705 Ensure <code>argoCD.enabled=true</code> was set during Helm install</p> <pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: argocd-frontend-hibernation\nspec:\n  argocd:\n    namespace: argocd\n    appProjects:\n      - frontend-team\n      - mobile-apps\n  schedule:\n    sleepSchedule: \"0 22 * * *\"     # Sleep at 10 PM UTC daily\n    # No wakeSchedule \u2192 stay asleep until manually updated\n</code></pre>"},{"location":"how-to-guides/create-cluster-resource-supervisor.html#example-c-explicit-namespace-list","title":"Example C: Explicit Namespace List","text":"<pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: specific-namespaces-hibernation\nspec:\n  namespaces:\n    names:\n      - team-a-staging\n      - team-b-test\n      - demo-env\n  schedule:\n    sleepSchedule: \"0 0 * * 0\"      # Every Sunday at midnight\n    wakeSchedule: \"0 0 * * 1\"       # Every Monday at midnight\n</code></pre>"},{"location":"how-to-guides/create-cluster-resource-supervisor.html#step-3-apply-the-resource","title":"Step 3: Apply the Resource","text":"<pre><code>kubectl apply -f cluster-resource-supervisor.yaml\n</code></pre>"},{"location":"how-to-guides/create-cluster-resource-supervisor.html#step-4-verify-status","title":"Step 4: Verify Status","text":"<pre><code>kubectl get clusterresourcesupervisor dev-environments-hibernation -o yaml\n</code></pre> <p>Key status fields:</p> <ul> <li><code>status.watchedNamespaces</code>: List of namespaces being managed</li> <li><code>status.sleepingNamespaces</code>: Details of scaled-down apps (with original replica counts)</li> <li><code>status.currentStatus</code>: Overall state (<code>running</code>, <code>sleeping</code>, <code>error</code>)</li> <li><code>status.nextReconcileTime</code>: Next scheduled action</li> </ul>"},{"location":"how-to-guides/create-cluster-resource-supervisor.html#notes","title":"Notes","text":"<ul> <li>The operator merges <code>names</code> and <code>labelSelector</code> results (union of both).</li> <li>If both <code>namespaces</code> and <code>argocd</code> are defined, the operator targets all namespaces from both sources.</li> <li>Namespaces not matching any criteria are ignored (safe by default).</li> </ul>"},{"location":"how-to-guides/create-resource-supervisor.html","title":"Setup ResourceSupervisor","text":""},{"location":"how-to-guides/create-resource-supervisor.html#setup-resourcesupervisor","title":"Setup ResourceSupervisor","text":""},{"location":"how-to-guides/create-resource-supervisor.html#creating-a-resourcesupervisor","title":"Creating a <code>ResourceSupervisor</code>","text":"<p>This guide explains how to create a namespace-scoped <code>ResourceSupervisor</code> to hibernate workloads in a single namespace.</p>"},{"location":"how-to-guides/create-resource-supervisor.html#prerequisites","title":"Prerequisites","text":"<ul> <li>The Hibernation Operator must be installed in your cluster.</li> <li>You have edit (or equivalent) permissions in the target namespace.</li> </ul>"},{"location":"how-to-guides/create-resource-supervisor.html#step-1-create-a-resourcesupervisor-yaml","title":"Step 1: Create a <code>ResourceSupervisor</code> YAML","text":"<p>Create a file named <code>resource-supervisor.yaml</code>:</p> <pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ResourceSupervisor\nmetadata:\n  name: my-namespace-hibernation\n  namespace: my-app-staging  # \u2190 Must match the namespace you want to hibernate\nspec:\n  schedule:\n    sleepSchedule: \"0 20 * * *\"   # Sleep every day at 8 PM UTC\n    wakeSchedule: \"0 8 * * *\"    # Wake up every day at 8 AM UTC\n</code></pre> <p>\ud83d\udca1 Cron Format: Uses standard Unix cron syntax (<code>minute hour day month weekday</code>). Timezone is UTC. Use tools like crontab.guru to validate schedules.</p>"},{"location":"how-to-guides/create-resource-supervisor.html#step-2-apply-the-resource","title":"Step 2: Apply the Resource","text":"<pre><code>kubectl apply -f resource-supervisor.yaml\n</code></pre>"},{"location":"how-to-guides/create-resource-supervisor.html#step-3-verify-status","title":"Step 3: Verify Status","text":"<p>Check the status to confirm the hibernation state:</p> <pre><code>kubectl get resourcesupervisor my-namespace-hibernation -n my-app-staging -o yaml\n</code></pre> <p>Look for:</p> <ul> <li><code>status.currentStatus</code>: <code>running</code> or <code>sleeping</code></li> <li><code>status.nextReconcileTime</code>: Next scheduled action (ISO 8601)</li> </ul>"},{"location":"how-to-guides/create-resource-supervisor.html#notes","title":"Notes","text":"<ul> <li>Only <code>Deployments</code> and <code>StatefulSets</code> in the same namespace are affected.</li> <li>The operator scales them to 0 replicas during sleep and restores original replica counts on wake.</li> <li>If <code>wakeSchedule</code> is omitted, workloads stay asleep until manually deleted or updated.</li> </ul>"},{"location":"how-to-guides/hibernate-resources.html","title":"Hibernate a Tenant","text":""},{"location":"how-to-guides/hibernate-resources.html#hibernate-a-tenant","title":"Hibernate a Tenant","text":"<p>Implementing hibernation for tenants' namespaces efficiently manages cluster resources by temporarily reducing workload activities during off-peak hours. This guide demonstrates how to configure hibernation schedules for tenant namespaces, leveraging Tenant and ResourceSupervisor for precise control.</p>"},{"location":"how-to-guides/hibernate-resources.html#configuring-hibernation-for-tenant-namespaces","title":"Configuring Hibernation for Tenant Namespaces","text":"<p>You can manage workloads in your cluster with MTO by implementing a hibernation schedule for your tenants. Hibernation downsizes the running <code>Deployments</code> and <code>StatefulSets</code> in a tenant\u2019s namespace according to a defined cron schedule. You can set a hibernation schedule for your tenants by adding the \u2018spec.hibernation\u2019 field to the tenant's respective Custom Resource.</p> <pre><code>hibernation:\n  sleepSchedule: 23 * * * *\n  wakeSchedule: 26 * * * *\n</code></pre> <p><code>spec.hibernation.sleepSchedule</code> accepts a cron expression indicating the time to put the workloads in your tenant\u2019s namespaces to sleep.</p> <p><code>spec.hibernation.wakeSchedule</code> accepts a cron expression indicating the time to wake the workloads in your tenant\u2019s namespaces up.</p> <p>Note</p> <p>Both sleep and wake schedules must be specified for your tenant's hibernation schedule to be valid.</p> <p>Additionally, adding the <code>hibernation.stakater.com/exclude: 'true'</code> annotation to a namespace excludes it from hibernating.</p> <p>Note</p> <p>This is only true for hibernation applied via the Tenant Custom Resource, and does not apply for hibernation done by manually creating a ClusterResourceSupervisor (details about that below).</p>"},{"location":"how-to-guides/hibernate-resources.html#cluster-namespace-resource-supervisor","title":"Cluster &amp; Namespace Resource Supervisor","text":"<p>Adding a Hibernation Schedule to a Tenant creates an accompanying ClusterResourceSupervisor Custom Resource.</p> <p>When the sleep timer is activated, the Resource Supervisor puts your applications to sleep and store their previous state. When the wake timer is activated, it uses the stored state to bring them back to running state.</p> <p>Enabling ArgoCD support for Tenants will also hibernate applications in the tenants' <code>appProjects</code>.</p> <pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: sigma-tenant\nspec:\n  argocd:\n    appProjects:\n      - sigma-tenant\n    namespace: openshift-gitops\n  schedule:\n    sleepSchedule: 42 * * * *\n    wakeSchedule: 45 * * * *\n\n  namespaces:\n    labelSelector:\n      matchLabels:\n        stakater.com/current-tenant: sigma\n      matchExpressions: {}\n    names:\n    - tenant-ns1\n    - tenant-ns2\n</code></pre> <p>Currently, Hibernation is available only for <code>StatefulSets</code> and <code>Deployments</code>.</p>"},{"location":"how-to-guides/hibernate-resources.html#manual-creation-of-resourcesupervisor","title":"Manual creation of ResourceSupervisor","text":"<p>Hibernation can also be applied by creating a ResourceSupervisor resource manually. The ResourceSupervisor definition will contain the hibernation cron schedule, the names of the namespaces to be hibernated, and the names of the ArgoCD AppProjects whose ArgoCD Applications have to be hibernated (as per the given schedule).</p> <p>This method can be used to hibernate:</p> <ul> <li>Some specific namespaces and AppProjects in a tenant</li> <li>A set of namespaces and AppProjects belonging to different tenants</li> <li>Namespaces and AppProjects belonging to a tenant that the cluster admin is not a member of</li> <li>Non-tenant namespaces and ArgoCD AppProjects</li> </ul> <p>As an example, the following ClusterResourceSupervisor could be created manually, to apply hibernation explicitly to the 'ns1' and 'ns2' namespaces, and to the 'sample-app-project' AppProject.</p> <pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: hibernator\nspec:\n  argocd:\n    appProjects:\n      - sample-app-project\n    namespace: openshift-gitops\n  schedule:\n    sleepSchedule: 42 * * * *\n    wakeSchedule: 45 * * * *\n\n  namespaces:\n    labelSelector:\n      matchLabels: {}\n      matchExpressions: {}\n    names:\n    - ns1\n    - ns2\n</code></pre>"},{"location":"how-to-guides/hibernate-resources.html#freeing-up-unused-resources-with-hibernation","title":"Freeing up unused resources with hibernation","text":""},{"location":"how-to-guides/hibernate-resources.html#hibernation-states","title":"Hibernation States","text":"<p>The ClusterResourceSupervisor will look like this at 'sleeping' time (as per the schedule):</p> <pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: example\nspec:\n  argocd:\n    appProjects: []\n    namespace: ''\n  schedule:\n    sleepSchedule: 0 20 * * 1-5\n    wakeSchedule: 0 8 * * 1-5\n  namespaces:\n    labelSelector:\n      matchLabels: {}\n      matchExpressions: {}\n    names:\n      - build\n      - stage\n      - dev\nstatus:\n  currentStatus: sleeping\n  nextReconcileTime: '2024-06-11T08:00:00Z'\n  sleepingNamespaces:\n  - Namespace: build\n    sleepingApplications:\n    - kind: Deployment\n      name: Example\n      replicas: 3\n  - Namespace: stage\n    sleepingApplications:\n    - kind: Deployment\n      name: Example\n      replicas: 3\n</code></pre>"},{"location":"how-to-guides/hibernate-resources.html#hibernating-namespaces-andor-argocd-applications-with-cluster-resourcesupervisor","title":"Hibernating namespaces and/or ArgoCD Applications with Cluster ResourceSupervisor","text":"<p>Bill, the cluster administrator, wants to hibernate a collection of namespaces and AppProjects belonging to multiple different tenants. He can do so by creating a ResourceSupervisor manually, specifying the hibernation schedule in its spec, the namespaces and ArgoCD Applications that need to be hibernated as per the mentioned schedule. Bill can also use the same method to hibernate some namespaces and ArgoCD Applications that do not belong to any tenant on his cluster.</p> <p>The example given below will hibernate the ArgoCD Applications in the 'test-app-project' AppProject; and it will also hibernate the 'ns2' and 'ns4' namespaces.</p> <pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: test-cluster-resource-supervisor\nspec:\n  argocd:\n    appProjects:\n      - test-app-project\n    namespace: argocd-ns\n  schedule:\n    sleepSchedule: 0 20 * * 1-5\n    wakeSchedule: 0 8 * * 1-5\n  namespaces:\n    labelSelector:\n      matchLabels: {}\n      matchExpressions: {}\n    names:\n      - ns2\n      - ns4\nstatus:\n  currentStatus: sleeping\n  nextReconcileTime: '2022-10-13T08:00:00Z'\n  sleepingNamespaces:\n  - Namespace: build\n    sleepingApplications:\n    - kind: Deployment\n      name: test-deployment\n      replicas: 3\n    - kind: Deployment\n      name: test-deployment\n      replicas: 3\n</code></pre>"},{"location":"installation/kubernetes.html","title":"On Kubernetes","text":""},{"location":"installation/kubernetes.html#on-kubernetes","title":"On Kubernetes","text":"<p>This document contains instructions for installing, uninstalling, and configuring the Hibernation Operator on Kubernetes.</p> <ol> <li>Installing via Helm CLI </li> <li>Uninstall</li> </ol>"},{"location":"installation/kubernetes.html#requirements","title":"Requirements","text":"<ul> <li>A Kubernetes cluster (v1.24 or higher)  </li> <li>Helm CLI </li> <li>kubectl </li> <li>(Optional but recommended) cert-manager \u2014 required only if you enable the webhook</li> </ul> <p>\ud83d\udca1 The Hibernation Operator uses admission webhooks for CR validation (e.g., cron format checks). If you disable the webhook (<code>webhook.create=false</code>), cert-manager is not required.</p>"},{"location":"installation/kubernetes.html#installing-via-helm-cli","title":"Installing via Helm CLI","text":"<p>The public Helm chart for the Hibernation Operator is available in the public Stakater Helm repository.</p>"},{"location":"installation/kubernetes.html#install-the-operator","title":"Install the Operator","text":"<p>Install into the recommended namespace <code>hibernation-system</code>:</p> <pre><code>helm install hibernation-operator oci://ghcr.io/stakater/public/charts/hibernation-operator \\\n  --namespace hibernation-operator-system \\\n  --create-namespace\n</code></pre> <ul> <li>\u2705 This installs</li> <li>The Hibernation Controller (manages both <code>ClusterResourceSupervisor</code> and <code>ResourceSupervisor</code>)</li> <li>The Webhook (for validation)</li> <li>Required RBAC, CRDs, and Service resources</li> </ul>"},{"location":"installation/kubernetes.html#optional-enable-argocd-integration","title":"Optional: Enable ArgoCD Integration","text":"<p>If you use ArgoCD and want to target AppProjects, enable ArgoCD support:</p> <pre><code>helm install hibernation-operator stakater/hibernation-operator \\\n  --namespace hibernation-system \\\n  --create-namespace \\\n  --set argoCD.enabled=true \\\n  --set argoCD.namespace=argocd\n</code></pre>"},{"location":"installation/kubernetes.html#wait-for-pods-to-start","title":"Wait for Pods to Start","text":"<pre><code>kubectl get pods -n hibernation-operator-system --watch\n</code></pre> <p>Once all pods are <code>Running</code>, you can begin creating hibernation policies:</p> <ul> <li>Create a ClusterResourceSupervisor </li> <li>Create a ResourceSupervisor</li> </ul>"},{"location":"installation/kubernetes.html#uninstall-via-helm-cli","title":"Uninstall via Helm CLI","text":"<p>To uninstall the Hibernation Operator:</p> <pre><code>helm uninstall hibernation-operator --namespace hibernation-operator-system\n</code></pre> <p>\u26a0\ufe0f Note: This removes the operator and its RBAC, but does not delete your CRs (<code>ClusterResourceSupervisor</code>, <code>ResourceSupervisor</code>). If you want to fully clean up, delete any remaining CRs first:</p> <pre><code>kubectl delete clusterresourcesupervisors.hibernation.stakater.com --all\nkubectl delete resourcesupervisors.hibernation.stakater.com --all --all-namespaces\n</code></pre> <p>Then uninstall the Helm release.</p>"},{"location":"installation/kubernetes.html#notes","title":"Notes","text":"<ul> <li>The operator does not require a database, cache, or external scheduler\u2014it works entirely with native Kubernetes resources.</li> <li>Workloads are only scaled if explicitly targeted by a supervisor. No namespace is modified by default.</li> <li>Replica counts are stored in the CR\u2019s <code>status</code> field, ensuring safe restoration even after operator restarts.</li> <li>For production use, consider pinning to a specific chart version:</li> </ul> <pre><code>  helm install hibernation-operator stakater/hibernation-operator --version a.b.ccc ...\n</code></pre>"},{"location":"installation/openshift.html","title":"On OpenShift","text":""},{"location":"installation/openshift.html#on-openshift","title":"On OpenShift","text":"<p>The Hibernation Operator is a Red Hat Certified Operator available on the Red Hat Marketplace and OperatorHub in OpenShift.</p> <p>This document contains instructions for installing, configuring, and uninstalling the Hibernation Operator on OpenShift.</p> <ol> <li>OpenShift OperatorHub UI </li> <li>CLI / GitOps </li> <li>Uninstall</li> </ol>"},{"location":"installation/openshift.html#requirements","title":"Requirements","text":"<ul> <li>An OpenShift cluster (v4.10 or higher recommended)</li> </ul>"},{"location":"installation/openshift.html#installing-via-operatorhub-ui","title":"Installing via OperatorHub UI","text":"<ol> <li>In the OpenShift Console, navigate to Operators \u2192 OperatorHub from the left sidebar.</li> <li>Search for <code>Hibernation Operator</code> and click on the tile.</li> <li>Click the Install button.</li> </ol> <ol> <li>Configure the installation:</li> <li>Update channel: <code>stable</code> (recommended for production)</li> <li>Installed Namespace: Select <code>hibernation-operator-system</code> (create if it doesn\u2019t exist)</li> <li>Update approval:  <ul> <li><code>Automatic</code> for development  </li> <li><code>Manual</code> for production (allows review of upgrades)</li> </ul> </li> </ol> <p>Click Install.</p> <p></p> <ol> <li>Wait for the operator to install. You\u2019ll see a status of Installed operator: Ready for use when ready.</li> <li>Once installed, the Hibernation Operator is ready to manage hibernation policies across your cluster.</li> </ol> <p></p> <p>\ud83d\udca1 Note: The operator is installed in the <code>hibernation-operator-system</code> namespace by default.</p>"},{"location":"installation/openshift.html#installing-via-cli-or-gitops","title":"Installing via CLI or GitOps","text":"<p>Use this method for automation, CI/CD pipelines, or GitOps workflows (e.g., with ArgoCD).</p>"},{"location":"installation/openshift.html#step-1-create-the-operator-namespace","title":"Step 1: Create the Operator Namespace","text":"<pre><code>oc create namespace hibernation-operator-system\n</code></pre>"},{"location":"installation/openshift.html#step-2-create-an-operatorgroup","title":"Step 2: Create an OperatorGroup","text":"<pre><code>oc create -f - &lt;&lt; EOF\napiVersion: operators.coreos.com/v1\nkind: OperatorGroup\nmetadata:\n  name: hibernation-operator\n  namespace: hibernation-operator-system\nspec:\n  targetNamespaces:\n  - hibernation-operator-system\nEOF\n</code></pre>"},{"location":"installation/openshift.html#step-3-create-a-subscription","title":"Step 3: Create a Subscription","text":"<pre><code>oc create -f - &lt;&lt; EOF\napiVersion: operators.coreos.com/v1alpha1\nkind: Subscription\nmetadata:\n  name: hibernation-operator\n  namespace: hibernation-system\nspec:\n  channel: release-0.1\n  installPlanApproval: Automatic\n  name: hibernation-operator\n  source: certified-operators\n  sourceNamespace: openshift-marketplace\n  # Optional: pin to a specific version\n  # startingCSV: hibernation-operator.v0.1.102\nEOF\n</code></pre> <p>\u2705 GitOps Tip: Commit these YAMLs to your GitOps repo to manage the operator declaratively.</p>"},{"location":"installation/openshift.html#step-4-verify-installation","title":"Step 4: Verify Installation","text":"<p>In the OpenShift Console:</p> <ul> <li>Go to Operators \u2192 Installed Operators</li> <li>Select the <code>hibernation-system</code> project</li> <li>Confirm the Hibernation Operator status is Succeeded</li> </ul> <p>Or via CLI:</p> <pre><code>oc get csv -n hibernation-operator-system\noc get pods -n hibernation-operator-system\n</code></pre> <p>Wait until the <code>hibernation-controller</code> pod is <code>Running</code>.</p> <p></p>"},{"location":"installation/openshift.html#uninstall-via-operatorhub-ui","title":"Uninstall via OperatorHub UI","text":"<p>\u26a0\ufe0f Warning: Uninstalling the operator does not delete your CRs (<code>ClusterResourceSupervisor</code>, <code>ResourceSupervisor</code>). Workloads may remain asleep if not cleaned up.</p>"},{"location":"installation/openshift.html#step-1-optional-clean-up-hibernation-policies","title":"Step 1: (Optional) Clean Up Hibernation Policies","text":"<p>Delete any active hibernation resources to restore workloads:</p> <pre><code># Delete all cluster-wide hibernation rules\noc delete clusterresourcesupervisors.hibernation.stakater.com --all\n\n# Delete all namespace-scoped hibernation rules\noc delete resourcesupervisors.hibernation.stakater.com --all --all-namespaces\n</code></pre>"},{"location":"installation/openshift.html#step-2-uninstall-the-operator","title":"Step 2: Uninstall the Operator","text":"<ol> <li>In OpenShift Console, go to Operators \u2192 Installed Operators</li> <li>Find Hibernation Operator in the <code>hibernation-operator-system</code> project</li> <li>Click the three-dot menu \u2192 Uninstall Operator</li> <li>Confirm removal</li> </ol>"},{"location":"installation/openshift.html#step-3-optional-clean-up-leftover-resources","title":"Step 3: (Optional) Clean Up Leftover Resources","text":"<p>To fully remove all traces:</p> <pre><code># Remove namespace (includes RBAC, deployments, etc.)\noc delete namespace hibernation-operator-system\n\n# Remove CRDs (only if no other instances exist)\noc delete crd clusterresourcesupervisors.hibernation.stakater.com\noc delete crd resourcesupervisors.hibernation.stakater.com\n</code></pre> <p>\ud83d\udd12 Note: CRD deletion is irreversible. Ensure no other tools depend on them.</p>"},{"location":"installation/openshift.html#notes","title":"Notes","text":"<ul> <li>The Hibernation Operator does not include a web console\u2014it is a lightweight, API-driven operator.</li> <li>It integrates natively with OpenShift workloads (<code>Deployments</code>, <code>StatefulSets</code>) and ArgoCD (if installed).</li> <li>For production, use Manual approval and test upgrades in a staging cluster first.</li> <li>Full CRD documentation:<ul> <li><code>ClusterResourceSupervisor</code></li> <li><code>ResourceSupervisor</code></li> </ul> </li> </ul>"},{"location":"installation/overview.html","title":"Overview","text":""},{"location":"installation/overview.html#overview","title":"Overview","text":"<p>The Hibernation Operator supports two installation methods: Operator Lifecycle Manager (OLM) and Helm Chart. These methods ensure flexibility and compatibility across various Kubernetes environments, including OpenShift, Azure Kubernetes Service (AKS), Amazon Elastic Kubernetes Service (EKS), Google Kubernetes Engine (GKE), and other standard Kubernetes distributions.</p>"},{"location":"installation/overview.html#installation-methods","title":"Installation Methods","text":""},{"location":"installation/overview.html#1-operator-lifecycle-manager-olm","title":"1. Operator Lifecycle Manager (OLM)","text":"<p>OLM is the recommended installation method for OpenShift clusters. The Hibernation Operator is Red Hat Certified and available in the OpenShift OperatorHub. This method provides native lifecycle management, automatic upgrades (when configured), and seamless integration with OpenShift\u2019s operator framework.</p>"},{"location":"installation/overview.html#2-helm-chart","title":"2. Helm Chart","text":"<p>Helm is the preferred installation method for all other Kubernetes platforms, including AKS, EKS, GKE, and vanilla Kubernetes. The Helm chart offers a lightweight, customizable, and GitOps-friendly deployment with support for optional features like ArgoCD integration and admission webhooks.</p>"},{"location":"installation/overview.html#prerequisites","title":"Prerequisites","text":"<p>Before proceeding, ensure the following:</p> <ul> <li>Access to an OpenShift cluster (for OLM) or a Kubernetes cluster v1.24+ (for Helm).</li> <li>Cluster administrator or equivalent permissions.</li> <li>Familiarity with <code>kubectl</code> (or <code>oc</code> for OpenShift).</li> <li>Helm CLI installed locally if using Helm-based installation.</li> <li>(Optional) cert-manager installed if enabling the admission webhook (required only for validation of cron schedules and CR structure).</li> </ul>"},{"location":"installation/overview.html#next-steps","title":"Next Steps","text":"<p>Choose the installation guide that matches your environment:</p> <ul> <li>Installing with OLM on OpenShift </li> <li>Installing with Helm on Kubernetes (generic)</li> </ul> <p>By following the appropriate guide, you\u2019ll be able to deploy the Hibernation Operator and start automating cost-saving hibernation of your workloads\u2014whether you're a platform team managing hundreds of namespaces or a developer optimizing a single staging environment.</p>"},{"location":"integrations/argocd.html","title":"ArgoCD Integration","text":""},{"location":"integrations/argocd.html#argocd-integration","title":"ArgoCD Integration","text":"<p>The Hibernation Operator provides optional, native integration with ArgoCD, enabling platform teams to apply hibernation schedules based on ArgoCD AppProjects. This allows hibernation policies to align with GitOps application boundaries rather than infrastructure namespaces\u2014ideal for organizations using ArgoCD for declarative application delivery.</p> <p>\ud83d\udca1 Note: ArgoCD integration is optional and must be explicitly enabled during installation.</p>"},{"location":"integrations/argocd.html#how-it-works","title":"How It Works","text":"<p>When a <code>ClusterResourceSupervisor</code> specifies <code>argocd.appProjects</code>, the Hibernation Operator:</p> <ol> <li>Discovers all namespaces associated with the listed ArgoCD <code>AppProject</code>s (by reading the <code>AppProject.spec.destinations</code> field).</li> <li>Applies hibernation (scaling <code>Deployments</code>/<code>StatefulSets</code> to 0) to workloads in those namespaces according to the defined <code>sleepSchedule</code> and <code>wakeSchedule</code>.</li> <li>Tracks state in the CR\u2019s <code>status.sleepingNamespaces</code> to ensure accurate restoration.</li> </ol> <p>This means you can hibernate entire application portfolios (e.g., <code>frontend-team</code>, <code>data-platform</code>) with a single policy\u2014without manually listing namespaces.</p>"},{"location":"integrations/argocd.html#enabling-argocd-integration","title":"Enabling ArgoCD Integration","text":""},{"location":"integrations/argocd.html#step-1-install-hibernation-operator-with-argocd-support","title":"Step 1: Install Hibernation Operator with ArgoCD Support","text":"<p>During Helm installation, enable ArgoCD and specify the ArgoCD namespace:</p> <pre><code>helm install hibernation-operator oci://ghcr.io/stakater/public/charts/hibernation-operator \\\n  --namespace hibernation-system \\\n  --create-namespace \\\n  --set argoCD.enabled=true \\\n  --set argoCD.namespace=argocd\n</code></pre> <p>\u2705 The operator requires read-only access to <code>AppProject</code> resources in the ArgoCD namespace.</p>"},{"location":"integrations/argocd.html#step-2-create-a-clusterresourcesupervisor-targeting-appprojects","title":"Step 2: Create a <code>ClusterResourceSupervisor</code> Targeting AppProjects","text":"<pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: argocd-hibernation-policy\nspec:\n  argocd:\n    namespace: argocd                # \u2190 Namespace where ArgoCD is installed\n    appProjects:                     # \u2190 List of AppProject names\n      - frontend-team\n      - mobile-apps\n      - data-platform\n  schedule:\n    sleepSchedule: \"0 18 * * 1-5\"   # Sleep weekdays at 6 PM UTC\n    wakeSchedule: \"0 8 * * 1-5\"     # Wake weekdays at 8 AM UTC\n</code></pre> <p>Apply it:</p> <pre><code>kubectl apply -f cluster-resource-supervisor-argocd.yaml\n</code></pre>"},{"location":"integrations/argocd.html#step-3-verify-targeted-namespaces","title":"Step 3: Verify Targeted Namespaces","text":"<p>Check the status to see which namespaces are being watched:</p> <pre><code>kubectl get clusterresourcesupervisor argocd-hibernation-policy -o jsonpath='{.status.watchedNamespaces}'\n</code></pre> <p>Example output:</p> <pre><code>[\"frontend-dev\", \"mobile-staging\", \"data-platform-prod\"]\n</code></pre> <p>These are the namespaces defined in the <code>destinations</code> of the specified AppProjects.</p>"},{"location":"integrations/argocd.html#key-benefits","title":"Key Benefits","text":"Benefit Description GitOps-Aligned Hibernation Hibernation follows application ownership (via AppProjects), not manual namespace lists. Dynamic Namespace Discovery New namespaces added to an AppProject are automatically included in hibernation. No Duplication Avoid maintaining separate namespace lists in both ArgoCD and hibernation policies. Safe &amp; Observable Original replica counts are preserved; status shows exactly which apps are sleeping."},{"location":"integrations/argocd.html#requirements-permissions","title":"Requirements &amp; Permissions","text":"<ul> <li>ArgoCD must be installed in the cluster (typically in the <code>argocd</code> namespace).</li> <li>The Hibernation Operator needs the following RBAC (automatically included when <code>argoCD.enabled=true</code>):</li> </ul> <pre><code>- apiGroups: [\"argoproj.io\"]\n  resources: [\"appprojects\"]\n  verbs: [\"get\", \"list\", \"watch\"]\n</code></pre> <p>\ud83d\udd12 The operator never modifies ArgoCD resources\u2014it only reads <code>AppProject</code> definitions.</p>"},{"location":"integrations/argocd.html#combining-with-other-targeting-methods","title":"Combining with Other Targeting Methods","text":"<p>You can combine ArgoCD targeting with explicit namespaces or label selectors:</p> <pre><code>spec:\n  argocd:\n    namespace: argocd\n    appProjects: [\"frontend-team\"]\n  namespaces:\n    names: [\"legacy-staging\"]\n    labelSelector:\n      matchLabels:\n        env: dev\n</code></pre> <p>In this case, hibernation applies to:</p> <ul> <li>All namespaces in the <code>frontend-team</code> AppProject plus</li> <li>The <code>legacy-staging</code> namespace plus</li> <li>Any namespace with label <code>env=dev</code></li> </ul> <p>\ud83d\udd04 The union of all targeting methods is used.</p>"},{"location":"integrations/argocd.html#troubleshooting-tips","title":"Troubleshooting Tips","text":"<ul> <li>AppProject not found? Ensure the <code>appProjects</code> names exactly match the <code>AppProject</code> resource names (case-sensitive).</li> <li>Namespace not hibernating? Verify the namespace appears in <code>AppProject.spec.destinations</code>.</li> <li>Permission errors? Check that the operator\u2019s ServiceAccount has <code>get/list/watch</code> on <code>appprojects.argoproj.io</code>.</li> </ul>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html","title":"ClusterResourceSupervisor","text":""},{"location":"kubernetes-resources/cluster-resource-supervisor.html#clusterresourcesupervisor","title":"ClusterResourceSupervisor","text":"<p>The <code>ClusterResourceSupervisor</code> is a cluster-scoped custom resource that enables centralized hibernation management across multiple namespaces. It is designed for platform administrators who need to enforce cost-saving policies at scale\u2014whether by targeting explicit namespaces, using dynamic label selectors, or integrating with ArgoCD AppProjects.</p> <p>\u2705 Scope: Cluster-wide \u2705 Permissions: Requires cluster-admin or equivalent \u2705 Use Case: Platform-level hibernation for dev/test environments, GitOps portfolios, or tenant groups</p>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#supported-targeting-methods","title":"Supported Targeting Methods","text":"<p>You can define one or more of the following targeting strategies. The operator applies hibernation to the union of all matched namespaces.</p>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#1-explicit-namespace-list","title":"1. Explicit Namespace List","text":"<p>List namespaces by name:</p> <pre><code>spec:\n  namespaces:\n    names:\n      - team-a-dev\n      - team-b-staging\n      - demo-env\n</code></pre>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#2-label-selector-dynamic","title":"2. Label Selector (Dynamic)","text":"<p>Use Kubernetes-standard label selectors to match namespaces dynamically:</p> <pre><code>spec:\n  namespaces:\n    labelSelector:\n      matchLabels:\n        env: dev\n        team: frontend\n      matchExpressions:\n        - key: \"cost-center\"\n          operator: In\n          values: [\"cc-100\", \"cc-200\"]\n</code></pre> <p>\ud83d\udd0d Note:</p> <ul> <li><code>matchLabels</code> and <code>matchExpressions</code> are AND together.</li> <li>An empty <code>labelSelector: {}</code> matches all namespaces.</li> <li>A missing/<code>null</code> <code>labelSelector</code> matches none.</li> </ul>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#3-argocd-appproject-integration-optional","title":"3. ArgoCD AppProject Integration (Optional)","text":"<p>Target all namespaces associated with one or more ArgoCD <code>AppProject</code>s:</p> <pre><code>spec:\n  argocd:\n    namespace: argocd               # \u2190 Namespace where ArgoCD is installed\n    appProjects:                    # \u2190 List of AppProject names\n      - frontend-team\n      - data-platform\n</code></pre> <p>\ud83d\udd04 The operator reads <code>AppProject.spec.destinations</code> to discover target namespaces. \u2705 No manual namespace listing needed\u2014ideal for GitOps environments. \u26a0\ufe0f Prerequisite: ArgoCD integration must be enabled during installation.</p>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#hibernation-scheduling","title":"Hibernation Scheduling","text":"<p>Define when workloads should sleep and wake using standard cron expressions (UTC timezone).</p>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#full-cycle-sleep-wake","title":"Full Cycle: Sleep + Wake","text":"<pre><code>spec:\n  schedule:\n    sleepSchedule: \"0 18 * * 1-5\"   # Weekdays at 6 PM UTC\n    wakeSchedule: \"0 8 * * 1-5\"     # Weekdays at 8 AM UTC\n</code></pre>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#permanent-sleep-manual-wake","title":"Permanent Sleep (Manual Wake)","text":"<p>Omit <code>wakeSchedule</code> to keep workloads asleep until the CR is updated or deleted:</p> <pre><code>spec:\n  schedule:\n    sleepSchedule: \"0 0 1 * *\"      # Sleep on the 1st of every month\n    # wakeSchedule: omitted \u2192 stay asleep\n</code></pre>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#ignored-namespaces","title":"Ignored Namespaces","text":"<p>Even if a namespace matches your targeting rules, it will be excluded if it has:</p> <ul> <li>The annotation:</li> </ul> <pre><code>hibernation.stakater.com/exclude: \"true\"\n</code></pre> <p>\ud83d\udd12 This allows teams to opt out of platform-wide hibernation policies.</p>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#status-tracking","title":"Status Tracking","text":"<p>The operator populates rich status fields for observability and debugging:</p> <pre><code>status:\n  currentStatus: sleeping                 # \"running\", \"sleeping\", or \"error\"\n  nextReconcileTime: \"2025-02-01T08:00:00Z\"\n  watchedNamespaces:                      # Namespaces being managed\n    - team-a-dev\n    - frontend-staging\n  ignoreNamespaces:                       # Excluded (e.g., via annotation)\n    - kube-system\n  sleepingNamespaces:                     # Detailed state of scaled-down apps\n    - Namespace: team-a-dev\n      status: sleeping\n      sleepingApplications:\n        - name: web-api\n          kind: Deployment\n          replicas: 3                    # \u2190 Original replica count (restored on wake)\n          status: sleeping\n</code></pre> <p>Use <code>kubectl describe</code> or <code>kubectl get -o yaml</code> to inspect:</p> <pre><code>kubectl get clusterresourcesupervisor my-policy -o jsonpath='{.status}'\n</code></pre>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#example-platform-wide-dev-hibernation","title":"Example: Platform-Wide Dev Hibernation","text":"<pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: dev-environments-hibernation\nspec:\n  namespaces:\n    labelSelector:\n      matchLabels:\n        env: dev\n  schedule:\n    sleepSchedule: \"0 18 * * 1-5\"\n    wakeSchedule: \"0 8 * * 1-5\"\n</code></pre> <p>\ud83c\udf10 Applies to all namespaces labeled <code>env=dev</code>, now and in the future.</p>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#example-argocd-label-selector-combo","title":"Example: ArgoCD + Label Selector Combo","text":"<pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ClusterResourceSupervisor\nmetadata:\n  name: hybrid-hibernation\nspec:\n  argocd:\n    namespace: argocd\n    appProjects:\n      - mobile-apps\n  namespaces:\n    names:\n      - legacy-staging\n    labelSelector:\n      matchLabels:\n        temporary: \"true\"\n  schedule:\n    sleepSchedule: \"0 20 * * *\"\n    wakeSchedule: \"0 8 * * *\"\n</code></pre> <p>\ud83d\udd04 Hibernates:</p> <ul> <li>All namespaces in the <code>mobile-apps</code> AppProject</li> <li>Plus <code>legacy-staging</code></li> <li>Plus any namespace with label <code>temporary=true</code></li> </ul>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#key-notes","title":"Key Notes","text":"<ul> <li>\u274c Not namespace-scoped: Cannot be created inside a namespace.</li> <li>\u2705 Safe by default: Only modifies <code>Deployments</code> and <code>StatefulSets</code>.</li> <li>\u2705 Stateful restoration: Replica counts are stored in <code>status.sleepingNamespaces</code>.</li> <li>\u2705 Coexists with <code>ResourceSupervisor</code>: If a namespace has a local <code>ResourceSupervisor</code>, the operator skips it (to avoid conflicts)\u2014unless your operator logic is designed otherwise. (Confirm behavior in your implementation.)</li> </ul>"},{"location":"kubernetes-resources/cluster-resource-supervisor.html#when-to-use-clusterresourcesupervisor","title":"When to Use <code>ClusterResourceSupervisor</code>","text":"Scenario Recommended Hibernating 50+ dev namespaces \u2705 GitOps with ArgoCD AppProjects \u2705 Dynamic namespace selection via labels \u2705 Team self-service in one namespace \u274c \u2192 Use <code>ResourceSupervisor</code>"},{"location":"kubernetes-resources/resource-supervisor.html","title":"ResourceSupervisor","text":""},{"location":"kubernetes-resources/resource-supervisor.html#resourcesupervisor","title":"ResourceSupervisor","text":"<p>The <code>ResourceSupervisor</code> is a namespace-scoped custom resource that enables self-service hibernation of workloads within a single namespace. It allows application teams or namespace owners to define schedules for scaling down and restoring <code>Deployments</code> and <code>StatefulSets</code> without requiring cluster-wide permissions.</p> <p>\u2705 Only affects the namespace in which it is created.</p>"},{"location":"kubernetes-resources/resource-supervisor.html#supported-workloads","title":"Supported Workloads","text":"<ul> <li><code>Deployment</code></li> <li><code>StatefulSet</code></li> </ul> <p>These resources are scaled to 0 replicas during sleep and restored to their original replica count during wake.</p>"},{"location":"kubernetes-resources/resource-supervisor.html#ignored-namespaces","title":"Ignored Namespaces","text":"<p>While <code>ResourceSupervisor</code> is namespace-scoped and only acts within its own namespace, the Hibernation Operator still respects global exclusion rules. A namespace (including the one containing the <code>ResourceSupervisor</code>) will be ignored if it has:</p> <ul> <li>The annotation:</li> </ul> <pre><code>hibernation.stakater.com/exclude: \"true\"\n</code></pre> <p>\ud83d\udd12 The operator never modifies workloads in excluded namespaces\u2014even if a <code>ResourceSupervisor</code> exists there.</p>"},{"location":"kubernetes-resources/resource-supervisor.html#supported-modes","title":"Supported Modes","text":""},{"location":"kubernetes-resources/resource-supervisor.html#1-hibernation-with-cron-schedule-sleep-wake","title":"1. Hibernation with Cron Schedule (Sleep + Wake)","text":"<p>Define both <code>sleepSchedule</code> and <code>wakeSchedule</code> to automatically cycle workloads on and off.</p> <pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ResourceSupervisor\nmetadata:\n  name: nightly-hibernation\n  namespace: my-app-staging  # \u2190 Must match target namespace\nspec:\n  schedule:\n    sleepSchedule: \"0 20 * * *\"   # Sleep daily at 8:00 PM UTC\n    wakeSchedule: \"0 8 * * *\"     # Wake daily at 8:00 AM UTC\n</code></pre> <p>\ud83d\udd52 Cron Format: Standard Unix cron (<code>minute hour day month weekday</code>). Timezone is UTC.</p>"},{"location":"kubernetes-resources/resource-supervisor.html#2-permanent-sleep-manual-wake","title":"2. Permanent Sleep (Manual Wake)","text":"<p>Omit <code>wakeSchedule</code> to keep workloads asleep indefinitely. Workloads will only wake when:</p> <ul> <li>The <code>ResourceSupervisor</code> is deleted, or</li> <li>A <code>wakeSchedule</code> is added later</li> </ul> <pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ResourceSupervisor\nmetadata:\n  name: pause-for-maintenance\n  namespace: demo-env\nspec:\n  schedule:\n    sleepSchedule: \"0 12 * * *\"   # Sleep today at noon UTC, never wake\n    # wakeSchedule: omitted \u2192 stay asleep\n</code></pre> <p>\ud83d\udca1 This is useful for temporary freezes (e.g., during security reviews or budget pauses).</p>"},{"location":"kubernetes-resources/resource-supervisor.html#3-immediate-sleep-no-schedule","title":"3. Immediate Sleep (No Schedule)","text":"<p>To sleep immediately, create a <code>ResourceSupervisor</code> with an empty <code>schedule</code> block:</p> <pre><code>apiVersion: hibernation.stakater.com/v1beta1\nkind: ResourceSupervisor\nmetadata:\n  name: sleep-now\n  namespace: ci-preview-pr123\nspec:\n  schedule: {}\n</code></pre> <ul> <li>Workloads are scaled to 0 as soon as the CR is created.</li> <li>They remain asleep until the CR is deleted.</li> </ul> <p>\ud83d\ude80 Ideal for ephemeral environments (e.g., CI/CD preview namespaces).</p>"},{"location":"kubernetes-resources/resource-supervisor.html#status-tracking","title":"Status Tracking","text":"<p>The operator updates the CR\u2019s <code>status</code> to reflect current state:</p> <pre><code>status:\n  currentStatus: sleeping      # or \"running\", \"error\"\n  nextReconcileTime: \"2025-02-01T08:00:00Z\"\n</code></pre> <p>Use <code>kubectl describe</code> or <code>kubectl get -o yaml</code> to monitor:</p> <pre><code>kubectl get resourcesupervisor nightly-hibernation -n my-app-staging -o jsonpath='{.status}'\n</code></pre>"},{"location":"kubernetes-resources/resource-supervisor.html#key-notes","title":"Key Notes","text":"<ul> <li>\u274c No <code>argocd</code> field: <code>ResourceSupervisor</code> does not support ArgoCD integration. Use <code>ClusterResourceSupervisor</code> for AppProject-based hibernation.</li> <li>\u274c No <code>namespaces</code> field: It only affects its own namespace\u2014you cannot target other namespaces.</li> <li>\u2705 Safe by default: Only <code>Deployments</code> and <code>StatefulSets</code> are scaled; all other resources are untouched.</li> <li>\u2705 Stateful restoration: Original replica counts are stored in the CR\u2019s status and restored accurately\u2014even after operator restarts.</li> </ul>"},{"location":"kubernetes-resources/resource-supervisor.html#example-cicd-preview-namespace","title":"Example: CI/CD Preview Namespace","text":"<p>A CI pipeline creates a namespace <code>pr-456</code> and immediately hibernates it to save costs:</p> <pre><code># pr-456-hibernation.yaml\napiVersion: hibernation.stakater.com/v1beta1\nkind: ResourceSupervisor\nmetadata:\n  name: auto-sleep\n  namespace: pr-456\nspec:\n  schedule: {}\n</code></pre> <p>Apply it:</p> <pre><code>kubectl apply -f pr-456-hibernation.yaml\n</code></pre> <p>Workloads sleep instantly. When the PR is merged, the pipeline deletes the namespace (or the CR), waking workloads briefly before cleanup.</p>"}]}